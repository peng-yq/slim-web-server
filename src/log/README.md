## log

高效、线程安全的日志系统，支持同步和异步日志记录。

**主要特性**

- 线程安全：确保多线程环境下日志记录的正确性。
- 支持同步与异步日志记录：可配置为同步或异步模式，以满足不同的性能需求。
- 自动日志文件管理：自动按日期管理和分割日志文件。
- 多级别日志：支持不同级别的日志记录（debug、info、warn、error）。

**单例模式**

使用单例模式设计，确保全局只有一个日志系统实例。这样可以集中管理日志记录资源，并减少资源使用冲突。单例通过一个静态方法Instance()实现，保证了实例的唯一性和线程安全的初始化。

**std::unique_ptr**

使用unique_ptr管理资源，如异步写线程和阻塞队列，确保资源的正确释放。unique_ptr是一个智能指针，它拥有其指向的对象，，在unique_ptr被销毁时会自动释放所管理的对象。

**std::mutex**

使用互斥锁std::mutex来保护共享数据，确保日志操作的线程安全。在写入文件或修改共享状态时，会先锁定互斥锁，操作完成后再释放，从而避免数据竞态。

**同步与异步写**

- 同步写：直接将缓冲区的日志信息写入文件，适用于对日志实时性要求较高的场景。
- 异步写：将缓冲区的日志消息首先放入一个阻塞队列中，由后台线程负责将队列中的日志信息批量写入文件。这种方式可以显著减少日志写入对程序性能的影响，适用于高并发环境。

**宏定义**

提供了一系列宏定义，如LOG_DEBUG、LOG_INFO、LOG_WARN、LOG_ERROR，包装了日志级别、格式化输出等操作。

### usecase

```c++
#include "log.h"

int main() {
    // 初始化日志系统，设置为异步模式，最大容量为1024条记录
    Log::Instance()->Init(1, "./logs", ".log", 1024);

    // 记录不同级别的日志
    LOG_INFO("Server start, listening on port %d", 8080);
    LOG_WARN("Memory usage is over 80%%");
    LOG_ERROR("Failed to load configuration file");

    return 0;
}
```